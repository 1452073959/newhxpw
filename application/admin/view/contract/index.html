{extend name="index_layout"/}
{block name="main"}
<style type="text/css">
/*分页样式*/
.pagination{text-align:center;margin-top:20px;margin-bottom: 20px;}
.pagination li{margin:0px 10px; border:1px solid #e6e6e6;padding: 3px 8px;display: inline-block;}
.pagination .active{background-color: #dd1a20;color: #fff;}
.pagination .disabled{color:#aaa;}
</style>
<div class="layui-card">
    <div class="layui-card-body">
        <div class="layui-form">
            <blockquote class="layui-elem-quote news_search">
                <div class="layui-inline">
                    <a class="layui-btn layui-btn-sm" href="{:url('Contract/add')}">添加合同</a><span style="color:green" onclick="preview()">打印</span>

                </div>
            </blockquote>
            <table class="layui-table">
                <colgroup>
                    <col width="80">
                    <col width="80">
                    <col width="160">
                </colgroup>
                <thead>
                    <tr>
                        <th class="taleft">ID</th>
                        <th class="taleft" width="150">合同主题</th>
                        <th class="taleft">合同编号</th>
                        <th class="taleft">合同分类</th>                        
                        <th class="taleft">合同总额</th>
                        <th class="taleft">合同状态</th>
                        <th class="taleft">签订日期</th>
                        <th width="150">操作</th>
                    </tr>
                </thead>
                <!-- <?php dump($data)?> -->
                <tbody> 
                  {foreach name="data" item="vo"}
                    <tr>
                 <!--      <td>
                      <input type="checkbox" name="ids[]" lay-skin="primary" lay-filter="choose" value="1"><div class="layui-unselect layui-form-checkbox" lay-skin="primary"><i class="layui-icon"></i></div>
                      </td> -->
                      <td class="taleft">{$vo.id}</td>    
                      <td class="taleft">{$vo.theme}</td>    
                      <td class="taleft">{$vo.number}</td>    
                      <td class="taleft">{$vo.rep_type}</td>    
                      <td class="taleft">{$vo.total}</td>    
                      <td class="taleft">{$vo.rep_status}</td>    
                      <td class="taleft">{$vo.sign_time}</td>    
                              
               
                      <td>
                        <a href="{:url('Contract/edit', array('id' => $vo['id']))}" class="layui-btn layui-btn-xs layui-btn-normal"> 查看</a>
                        <!-- <a class="layui-btn layui-btn-xs ajax-get confirm layui-btn-danger" url="{:url('Contract/delete', array('id' => $vo['id']))}">删除</a> -->
                      </td>
                    </tr>       
                 {/foreach}
                 <!--    <tr>
                      <td>贤心</td>
                      <td>人生就像是一场修行</td>
                      <td>2016-11-29</td>
                      <td><a class="layui-btn layui-btn-xs" href=' . url("Menu/edit", array("id" => $r['id'])) . '>编辑</a><a class="layui-btn layui-btn-xs layui-btn-normal" href=' . url("Menu/add", array("parentid" => $r['id'])) . '>添加</a><a class="layui-btn layui-btn-xs ajax-get confirm layui-btn-danger" url=' . url("Menu/delete", array("id" => $r['id'])) . '>删除</a></td>
                    </tr> -->
                </tbody>
            </table>
        </div>
    </div>
</div>
{/block}
{block name="script"}
<script type="text/javascript" src="__STATIC__/admin/js/common.js"></script>
<script>
    function preview(oper){
        if (oper < 10){
            //get_page_info();
            bdhtml=window.document.body.innerHTML;//获取当前页的html代码
            sprnstr="<!--startprint"+oper+"-->";//设置打印开始区域
            eprnstr="<!--endprint"+oper+"-->";//设置打印结束区域
            prnhtml=bdhtml.substring(bdhtml.indexOf(sprnstr)+18); //从开始代码向后取html
             
            prnhtml=prnhtml.substring(0,prnhtml.indexOf(eprnstr));//从结束代码向前取html
            window.document.body.innerHTML=prnhtml;
            window.print();
            //prnhtml.print();
            window.document.body.innerHTML=bdhtml;
        } else {
            window.print();
        }
    }
</script>
{/block}